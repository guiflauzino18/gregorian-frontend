
<div class="mat-elevation-z8">

  <div class="p-3 flex gap-4">
    <button (click)="openModalNewProfissionals()" class="button button-add">Novo Profissional</button>

    <div class="border border-[var(--primary-green)] text-[var(--primary-gray)] rounded-md flex items-center w-70">
      <input type="text" class="h-full w-full p-2 focus:outline-none" (keyup)="searchProfissional()" [formControl]="search">
      <i class="bx bx-search text-xl p-2 "></i>
    </div>
  </div>

  @if (isLoadingResult) {
    <div class="table-loading-shade">
      @if (isLoadingResult) {
        <mat-spinner></mat-spinner>
      }
    </div>
  }

  <table mat-table [dataSource]="dataSource!" matSort (matSortChange)="getAllProfissionals($event)">

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
      <td mat-cell *matCellDef="let row" class="{{row.status == 'INATIVO' ? 'text-gray-400' : '' }}"> {{row.id}} </td>
    </ng-container>

    <ng-container matColumnDef="nome">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Nome </th>
      <td mat-cell *matCellDef="let row" class="{{row.status == 'INATIVO' ? 'text-gray-400' : '' }}"> {{row.nome}} </td>
    </ng-container>

    <ng-container matColumnDef="sobrenome">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Sobrenome </th>
      <td mat-cell *matCellDef="let row" class="{{row.status == 'INATIVO' ? 'text-gray-400' : '' }}"> {{row.sobrenome}} </td>
    </ng-container>

    <ng-container matColumnDef="login">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Login </th>
      <td mat-cell *matCellDef="let row" class="{{row.status == 'INATIVO' ? 'text-gray-400' : '' }}"> {{row.login}} </td>
    </ng-container>

    <ng-container matColumnDef="registro">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Registro </th>
      <td mat-cell *matCellDef="let row" class="{{row.status == 'INATIVO' ? 'text-gray-400' : '' }}"> {{row.registro}} </td>
    </ng-container>

    <ng-container matColumnDef="agenda">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Agenda </th>
      <td mat-cell *matCellDef="let row" class="{{row.status == 'INATIVO' ? 'text-gray-400' : '' }}"> {{row.agenda}} </td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
      <td mat-cell *matCellDef="let row" class="{{row.status == 'INATIVO' ? 'text-gray-400' : '' }}"> {{row.status}} </td>
    </ng-container>

    <ng-container matColumnDef="opcoes">
      <th mat-header-cell *matHeaderCellDef > Opções </th>
      <td mat-cell *matCellDef="let row"> 
         <button matIconButton [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="edit(row.id)">
              <mat-icon>edit</mat-icon>
              <span>Editar</span>
            </button>
          </mat-menu>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columns"></tr>
    <tr mat-row *matRowDef="let row; columns: columns;"></tr>


    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="4">No data matching the filter"</td>
    </tr>
  </table>

  <mat-paginator 
    [pageSizeOptions]="[1, 5, 10, 25, 100]"
    [pageSize]="pageable.size"
    [length]="pageable.totalElements"
    [pageIndex]="pageable.number"
    (page)="getAllProfissionals($event)"
    aria-label="Select page of profissionals" />
</div>